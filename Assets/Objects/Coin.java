package com.com.com.Assets.Objects;

import com.com.com.Engine.Components.Animator;
import com.com.com.Engine.Components.ImageRenderer;
import com.com.com.Engine.Components.RectCollider;
import com.com.com.Engine.Entity.Object;
import com.com.com.Engine.Gfx.Animation;
import com.com.com.Engine.Gfx.Sprite;
import com.com.com.Engine.Map.Room;
import com.com.com.Engine.Utils.StdBehaviour;
import com.com.com.Engine.Utils.Geom.Vec2;

import java.awt.Graphics2D;

public class Coin extends Object implements StdBehaviour {

    public Coin() {
        super("Coin");
    }

    /**
     * Called once the object is initialized
     */
    RectCollider collider, player;

    @Override
    public void Start() {

        player = (RectCollider) Object.FindObject("Player").getComponent(RectCollider.class);

        ImageRenderer renderer = new ImageRenderer(new Sprite(), null);
        Animation[] animation = { Sprite.createAnimation(new Sprite("tiles.png"), 16, 16, 24 * 16, 16, true, 3) };
        Animator animator = new Animator(animation, renderer);

        // Automatically generated by Himawari GUI, RectCollider Component
        collider = new RectCollider(transform, Vec2.fromValue(16));
        collider.solid = false;

        addComponent(collider);
        addComponent(renderer);
        addComponent(animator);

        animator.imageSpeed = 3f;
        animator.play(0, 0);
    }

    /**
     * Called once every frame
     */
    @Override
    public void Update(float deltaTime) {

        if (collider != null && collider.isCollidingWith(player)) {

            Player.coins++;
            DestroyInstance();
        }
    }

    /**
     * Draw your own graphics here
     */
    @Override
    public void DrawGUI(Graphics2D g) {

    }

    /**
     * Called when a new room is loaded
     */
    @Override
    public void RoomLoaded(Room room) {

    }

    /**
     * Called from a different object, receives the object that sent the message
     */
    @Override
    public void ReceiveMessage(String origin) {

    }

    /**
     * DO NOT ERASE THIS METHOD
     */
    @Override
    public StdBehaviour getBehaviour() {
        return (StdBehaviour) this;
    }

}
